// emojiMap256.ts
// 1バイト（0〜255）を人間が見分けやすい絵文字にマッピングするユーティリティ。
// OSやブラウザ間で破綻しにくい、標準的なUnicode絵文字を256個選定。

export const EMOJIS_256: string[] = [
  "😀","😃","😄","😁","😆","😅","😂","🤣",
  "😊","😇","🙂","🙃","😉","😌","😍","😘",
  "😗","😙","😚","😋","😛","😜","🤪","😝",
  "🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐",
  "😑","😶","😏","😒","🙄","😬","🤥","😌",
  "😔","😪","🤤","😴","😷","🤒","🤕","🤢",
  "🤮","🤧","🥵","🥶","🥴","😵","🤯","🤠",
  "🥳","😎","🤓","🧐","😕","😟","🙁","☹️",
  "😮","😯","😲","😳","🥺","😦","😧","😨",
  "😰","😥","😢","😭","😱","😖","😣","😞",
  "😩","😫","😤","😡","😠","🤬","😈","👿",
  "💀","☠️","💩","🤡","👹","👺","👻","👽",
  "👾","🤖","🎃","😺","😸","😹","😻","😼",
  "😽","🙀","😿","😾","👶","🧒","👦","👧",
  "🧑","👱‍♂️","👱‍♀️","👨","👩","🧔","🧓","👴",
  "👵","🙈","🙉","🙊","💋","💌","💘","💝",
  "💖","💗","💓","💞","💕","💟","❣️","💔",
  "❤️","🧡","💛","💚","💙","💜","🤎","🖤",
  "🤍","💯","💢","💥","💫","💦","💨","🕳️",
  "💬","👁️‍🗨️","🗨️","🗯️","💭","💤","👋","🤚",
  "🖐️","✋","🖖","👌","🤌","🤏","✌️","🤞",
  "🤟","🤘","🤙","👈","👉","👆","🖕","👇",
  "☝️","👍","👎","✊","👊","🤛","🤜","👏",
  "🙌","👐","🤲","🙏","✍️","💅","🤳","💪",
  "🦾","🦿","🦵","🦶","👂","🦻","👃","🧠",
  "🫀","🫁","🦷","🦴","👀","👁️","👅","👄",
  "🫦","🧬","🦠","💉","💊","🩸","🩹","🩺",
  "🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗",
  "🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍",
  "🌏","🪐","💫","⭐","🌟","✨","⚡","🔥",
  "💥","🌈","☁️","🌤️","🌧️","⛈️","🌩️","❄️",
  "🌪️","🌊","💧","🫧","🍀","🌸","🌹","🌻"
];

// --- 変換ユーティリティ ---

/** 1バイト値 (0-255) を絵文字に変換 */
export function byteToEmoji(b: number): string {
  return EMOJIS_256[b & 0xFF];
}

/** Uint8Array を絵文字文字列に変換 */
export function bytesToEmoji(u8: Uint8Array): string {
  return Array.from(u8, byteToEmoji).join('');
}

/** 絵文字文字列を Uint8Array に逆変換（厳密一致のみ） */
export function emojiToBytes(s: string): Uint8Array {
  const result: number[] = [];
  for (const ch of Array.from(s)) {
    const idx = EMOJIS_256.indexOf(ch);
    result.push(idx === -1 ? 0 : idx);
  }
  return new Uint8Array(result);
}
